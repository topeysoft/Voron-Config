"use strict";(globalThis["webpackChunkfrontend"]=globalThis["webpackChunkfrontend"]||[]).push([[496],{4708:(t,e,a)=>{a.r(e),a.d(e,{default:()=>mt});var s=a(3673),o=a(2323);const l={class:"row items-stretch q-col-gutter-md"},r={class:"col-12"},n=(0,s._)("div",{id:"map",style:{height:"280px"}},null,-1),i={class:"col-12"},c=(0,s._)("h2",{class:"m-0 p-0"},"Status",-1),p={class:"col-12 col-md-6"},d={class:"col-12 col-md-6"},u={class:"col-12 col-md-6"},m={class:"w-100 mb-2 m-0 row justify-between"},w=(0,s._)("span",{class:"col"},"Device Logs",-1),g={class:"col-auto"};function f(t,e,a,f,v,h){const b=(0,s.up)("q-card-section"),_=(0,s.up)("q-card"),y=(0,s.up)("compass"),k=(0,s.up)("controller"),C=(0,s.up)("q-btn"),W=(0,s.up)("q-td"),L=(0,s.up)("q-table"),D=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(D,{class:"q-pa-md"},{default:(0,s.w5)((()=>[(0,s._)("div",l,[(0,s._)("div",r,[(0,s.Wm)(_,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"m-0 q-pa-sm"},{default:(0,s.w5)((()=>[n])),_:1})])),_:1})]),(0,s._)("div",i,[(0,s.Wm)(_,{class:"card shadow p-1 mnh-10em"},{default:(0,s.w5)((()=>[c,(0,s.Uk)(" "+(0,o.zw)(t.status),1)])),_:1})]),(0,s._)("div",p,[(0,s.Wm)(_,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,{heading:t.status.yaw},null,8,["heading"])])),_:1})])),_:1})]),(0,s._)("div",d,[(0,s.Wm)(_,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(k)])),_:1})])),_:1})]),(0,s._)("div",u,[(0,s.Wm)(_,{class:""},{default:(0,s.w5)((()=>[(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(L,{title:"Logs",dense:"",class:"shadow-0",rows:t.deviceLogs,columns:t.logColumns,"row-key":"timestamp","binary-state-sort":"","virtual-scroll":"","virtual-scroll-item-size":48,"rows-per-page-options":[0],style:{height:"50em"}},{top:(0,s.w5)((()=>[(0,s._)("h5",m,[w,(0,s._)("span",g,[(0,s.Wm)(C,{onClick:t.clearLogs,color:"primary",label:"Clear logs",flat:"",dense:""},null,8,["onClick"])])])])),"body-cell":(0,s.w5)((t=>[(0,s.Wm)(W,{props:t,class:(0,o.C_)({"bg-info text-white":"info"===t.row.type,"bg-negative text-white":"error"===t.row.type,"bg-warning text-white":"warning"===t.row.type})},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(t.value),1)])),_:2},1032,["props","class"])])),_:1},8,["rows","columns"])])),_:1})])),_:1})])])])),_:1})}a(71);var v=a(741);const h=t=>((0,s.dD)("data-v-190bc874"),t=t(),(0,s.Cn)(),t),b={class:"compass"},_={class:"compass-inner"},y=h((()=>(0,s._)("div",{class:"north"},"N",-1))),k=h((()=>(0,s._)("div",{class:"east"},"E",-1))),C=h((()=>(0,s._)("div",{class:"west"},"W",-1))),W=h((()=>(0,s._)("div",{class:"south"},"S",-1))),D=h((()=>(0,s._)("div",{class:"arrow-up"},null,-1))),S=h((()=>(0,s._)("div",{class:"arrow-down"},null,-1))),Z=[D,S];function q(t,e,a,l,r,n){return(0,s.wg)(),(0,s.iD)("div",b,[(0,s._)("div",_,[y,k,C,W,(0,s._)("div",{class:"main-arrow",style:(0,o.j5)({"-webkit-transform":"rotate("+a.heading+"deg)"})},Z,4)])])}const T={name:"Compass",props:{heading:{type:Number,default:10}},data(){return{}}};var x=a(4260);const N=(0,x.Z)(T,[["render",q],["__scopeId","data-v-190bc874"]]),z=N;var I=a(8880);const Q=t=>((0,s.dD)("data-v-35d63e44"),t=t(),(0,s.Cn)(),t),M={class:"row"},U=(0,s.Uk)(" Stop "),Y={class:"set overflow-hidden"},j={key:0,class:"d-pad"},A=Q((()=>(0,s._)("a",{class:"up",href:"#"},null,-1))),B=Q((()=>(0,s._)("a",{class:"right",href:"#"},null,-1))),F=Q((()=>(0,s._)("a",{class:"down",href:"#"},null,-1))),O=Q((()=>(0,s._)("a",{class:"left",href:"#"},null,-1))),H=[A,B,F,O],P={key:1,class:"o-pad"},G={class:"row justify-center"},$=(0,s.Uk)("  AUTO"),J=(0,s.Uk)("MANUAL  "),R=(0,s.Uk)(" LIGHTS");function V(t,e,a,o,l,r){const n=(0,s.up)("q-icon"),i=(0,s.up)("q-btn"),c=(0,s.up)("q-btn-group"),p=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",M,[(0,s.Wm)(i,{outline:"",class:"q-mb-md mnw-10em",color:"negative"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{class:"q-mr-sm",name:"block"}),U])),_:1}),(0,s._)("div",Y,["dpad"===a.type?((0,s.wg)(),(0,s.iD)("nav",j,H)):((0,s.wg)(),(0,s.iD)("nav",P,[(0,s.wy)((0,s._)("a",{ref:"up",href:"#",color:"primary",focusable:"false",class:"bg-primary up",onClick:e[0]||(e[0]=(...t)=>r.up&&r.up(...t))},null,512),[[p]]),(0,s.wy)((0,s._)("a",{href:"#",color:"primary",class:"bg-primary right",onClick:e[1]||(e[1]=(...t)=>r.right&&r.right(...t))},null,512),[[p]]),(0,s.wy)((0,s._)("a",{href:"#",color:"",onClick:[e[2]||(e[2]=(0,I.iM)((t=>{t.stopPropagation(),t.preventDefault()}),["prevent"])),e[4]||(e[4]=(...t)=>r.down&&r.down(...t))],onFocus:e[3]||(e[3]=e=>t.$refs.up.focus()),focusable:!1,class:"bg-primary down"},null,544),[[p]]),(0,s.wy)((0,s._)("a",{color:"primary",href:"#",focusable:"false",class:"bg-primary left",onClick:e[5]||(e[5]=(...t)=>r.left&&r.left(...t))},null,512),[[p]])]))])]),(0,s._)("div",G,[(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s.Wm)(i,{unelevated:!0,outline:l.autoNavigate,color:"primary",class:"no-shadow",onClick:e[6]||(e[6]=t=>l.autoNavigate=!l.autoNavigate),icon:"assistant_navigation"},{default:(0,s.w5)((()=>[$])),_:1},8,["outline"]),(0,s.Wm)(i,{color:"primary",unelevated:!0,outline:!l.autoNavigate,class:"no-shadow",onClick:e[7]||(e[7]=t=>l.autoNavigate=!l.autoNavigate),"icon-right":"gamepad"},{default:(0,s.w5)((()=>[J])),_:1},8,["outline"])])),_:1}),(0,s.Wm)(i,{class:"q-ml-sm",color:"info",icon:"lightbulb"},{default:(0,s.w5)((()=>[R])),_:1})])])}const X={name:"Controller",props:{type:{type:String,default:"opad"}},data(){return{autoNavigate:!0}},methods:{up(t){t.preventDefault()},down(t){t.preventDefault()},left(t){t.preventDefault()},right(t){t.preventDefault()},handleKeyUp(t){const e=t=>{};switch(t.which){case 37:e("left");break;case 39:e("right");break;case 38:e("up");break;case 40:e("down");break}}},mounted(){}};var E=a(8240),K=a(4554),tt=a(6375),et=a(6489),at=a(7518),st=a.n(at);const ot=(0,x.Z)(X,[["render",V],["__scopeId","data-v-35d63e44"]]),lt=ot;st()(X,"components",{QBtn:E.Z,QIcon:K.Z,QBtnGroup:tt.Z}),st()(X,"directives",{Ripple:et.Z});const rt=(0,s.aZ)({components:{Compass:z},name:"PageIndex",components:{Compass:z,Controller:lt},data(){return{logColumns:[{name:"timestamp",field:"timestamp",label:"Timestamp (UTC)",align:"left",sortable:!0,width:"10%"},{name:"message",field:"message",label:"Details",align:"left",sortable:!0,width:"90%"}],url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoom:15,center:[51.505,-.159],markerLatLng:[51.504,-.159]}},computed:{...(0,v.Se)({_status:"devices/status",logs:"devices/logs"}),deviceLogs(){return this.logs||[]},status(){return this._status||{pitch:0,roll:0,yaw:20,lat:0,lon:0,alt:0}},bootTime(){return new Date(Date.now()-this.status.bootMillis)},bootTimeFormatted(){return this.status.bootMillis?this.$date.formatDate(this.bootTime,"ddd, MMM DD, YYYY HH:mm A"):"--:--:--"}},methods:{customSort(t,e,a){const s=[...t];return e&&s.sort(((t,s)=>{const o=a?s:t,l=a?t:s;return"timestamp"===e?o[e]>l[e]?1:o[e]<l[e]?-1:0:parseFloat(o[e])-parseFloat(l[e])})),s},clearLogs(){this.$store.commit("devices/setLogs",[])}},mounted(){var t=L.map("map").setView([38.60842,-92.1225],20);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:60,attribution:"© OpenStreetMap"}).addTo(t);let e="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",a="© OpenStreetMap";var s=L.tileLayer(e,{id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,attribution:a}).addTo(t),o=L.marker([38.60842,-92.1225]).addTo(t);o.bindPopup("<b>Hello world!</b><br>I am a popup.").openPopup();var l=L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{id:"mapbox/satellite-v9",tileSize:512,zoomOffset:-1,maxZoom:25,attribution:a}),r={"Street Names":s,Satellite:l};L.control.layers(r).addTo(t)}});var nt=a(4379),it=a(151),ct=a(5589),pt=a(9797),dt=a(3884);const ut=(0,x.Z)(rt,[["render",f]]),mt=ut;st()(rt,"components",{QPage:nt.Z,QCard:it.Z,QCardSection:ct.Z,QTable:pt.Z,QBtn:E.Z,QTd:dt.Z})}}]);